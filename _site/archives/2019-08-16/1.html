<!DOCTYPE html> <html lang="en"> <head> <meta charset="utf-8"> <meta http-equiv="X-UA-Compatible" content="IE=edge"> <meta name="viewport" content="width=device-width, initial-scale=1" /> <title>RGPerson - 随机身份生成脚本 · Chen's Blog</title> <meta name="description" content="RGPerson"> <meta name="keywords" content="RGPerson"> <link rel="icon" href="http://localhost:4000/assets/favicon.png"> <link rel="apple-touch-icon" href="http://localhost:4000/assets/touch-icon.png"> <link rel="preconnect" href="https://fonts.googleapis.com"> <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin> <link href="https://fonts.googleapis.com/css2?family=JetBrains+Mono:ital,wght@0,400;0,500;0,600;0,700;1,400;1,700&display=swap" rel="stylesheet"> <link rel="stylesheet" href="/assets/css/highlight/github.min.css" id="highlight-light"> <link rel="stylesheet" href="/assets/css/highlight/github-dark.min.css" id="highlight-dark" disabled> <link rel="stylesheet" href="/assets/core.css"> <link rel="canonical" href="http://localhost:4000/archives/2019-08-16/1"> <link rel="alternate" type="application/atom+xml" title="Chen's Blog" href="http://localhost:4000/feed.xml" /> <link href="/fancybox/source/jquery.fancybox.css?v=2.1.5" rel="stylesheet" media="all" /> <script> var _hmt = _hmt || []; (function() { var hm = document.createElement("script"); hm.src = "https://hm.baidu.com/hm.js?e4a42a371cc5994ee02b940034c29658"; var s = document.getElementsByTagName("script")[0]; s.parentNode.insertBefore(hm, s); })(); </script> <script> window.giscusThemeConfig = { light: "light_protanopia", dark: "dark_tritanopia" }; </script> <script src="/assets/js/theme.js"></script> </head> <body> <button class="theme-toggle" id="themeToggle" aria-label="Switch Theme"> <!-- 太阳图标 (在深色模式显示) --> <svg id="icon-sun" viewBox="0 0 24 24"> <path d="M12 7c-2.76 0-5 2.24-5 5s2.24 5 5 5 5-2.24 5-5-2.24-5-5-5zM2 13h2c.55 0 1-.45 1-1s-.45-1-1-1H2c-.55 0-1 .45-1 1s.45 1 1 1zm18 0h2c.55 0 1-.45 1-1s-.45-1-1-1h-2c-.55 0-1 .45-1 1s.45 1 1 1zM11 2v2c0 .55.45 1 1 1s1-.45 1-1V2c0-.55-.45-1-1-1s-1 .45-1 1zm0 18v2c0 .55.45 1 1 1s1-.45 1-1v-2c0-.55-.45-1-1-1s-1 .45-1 1zM5.99 4.58c-.39-.39-1.03-.39-1.41 0-.39.39-.39 1.03 0 1.41l1.06 1.06c.39.39 1.03.39 1.41 0s.39-1.03 0-1.41L5.99 4.58zm12.37 12.37c-.39-.39-1.03-.39-1.41 0-.39.39-.39 1.03 0 1.41l1.06 1.06c.39.39 1.03.39 1.41 0 .39-.39.39-1.03 0-1.41l-1.06-1.06zm1.06-10.96c.39-.39.39-1.03 0-1.41-.39-.39-1.03-.39-1.41 0l-1.06 1.06c-.39.39-.39 1.03 0 1.41s1.03.39 1.41 0l1.06-1.06zM7.05 18.36c.39-.39.39-1.03 0-1.41-.39-.39-1.03-.39-1.41 0l-1.06 1.06c-.39.39-.39 1.03 0 1.41s1.03.39 1.41 0l1.06-1.06z" /> </svg> <!-- 月亮图标 (在亮色模式显示) --> <svg id="icon-moon" viewBox="0 0 24 24" style="display: none"> <path d="M9.37,5.51C9.19,6.15,9.1,6.82,9.1,7.5c0,4.08,3.32,7.4,7.4,7.4c0.68,0,1.35-0.09,1.99-0.27C17.45,17.16,14.93,19,12,19 c-3.86,0-7-3.14-7-7C5,9.06,6.83,6.55,9.37,5.51z M12,3c-4.97,0-9,4.03-9,9s4.03,9,9,9s9-4.03,9-9c0-0.46-0.04-0.92-0.1-1.36 c-0.98,1.37-2.58,2.26-4.4,2.26c-2.98,0-5.4-2.42-5.4-5.4c0-1.81,0.89-3.42,2.26-4.4C12.92,3.04,12.46,3,12,3L12,3z" /> </svg> </button> <div class="author-section"> <a href="/" class="author-avatar-link"> <img src="/assets/avatar.jpg" class="author-avatar" alt="Author Avatar" /> </a> <h1 class="author-title">EvilChen</h1> <div class="divider"></div> <nav class="author-nav"> <a href="/about">About Me</a> <span class="separator">|</span> <a href="/friends">My Friends</a> </nav> <div class="divider"></div> </div> <div id="content"> <article> <div class="center"> <h1 class="title">RGPerson - 随机身份生成脚本</h1> <time class="code">August 16, 2019</time> </div> <div class="divider"></div> <div class="prose"> <h1 id="rgperson">RGPerson</h1> <p>项目地址：<a href="https://github.com/gh0stkey/RGPerson">https://github.com/gh0stkey/RGPerson</a></p> <p>RGPerson - 随机身份生成</p> <p>环境：python3</p> <p>使用方法：python3 RGPerson.py</p> <p><img src="/images/2019-08-16/0.png" alt="rgperson" /></p> <h2 id="为什么需要ta">为什么需要Ta</h2> <p>相信很多师傅们在做测试的时候经常遇到一些注册的业务功能，要填写的东西很多，我一般都是临时去百度用的信息，这样很繁琐所以决定造轮子撸了个随机身份生成的。</p> <h2 id="介绍">介绍</h2> <p>该脚本生成信息：姓名\年龄\性别\身份证\手机号\组织机构代码\统一社会信用代码</p> <h2 id="脚本编写原理">脚本编写原理</h2> <p><strong>脚本的函数：</strong> genMobile()、genIdCard()、genName()、genOrgCode()、genCreditCode()</p> <p>genMobile() 为随机生成手机号的函数</p> <p>genName() 为随机生成姓名的函数</p> <p>genIdCard() 为随机生成身份证的函数</p> <p>genOrgCode() 为随机生成组织机构代码的函数</p> <p>genCreditCode() 为随机生成统一社会信用代码的函数</p> <h3 id="genmobile">genMobile()</h3> <p>随机生成手机号：需要知道国内手机号的构成</p> <p>1.长度为十一位</p> <p>2.前三位表示运营商</p> <p>现在我们只需要做到收集手机号号段的前三位以及对应的运营商：</p><pre><code class="language-python">prelist = {"133":"电信","149":"电信","153":"电信","173":"电信","177":"电信","180":"电信","181":"电信","189":"电信","199":"电信","130":"联通","131":"联通","132":"联通","145":"联通","155":"联通","156":"联通","166":"联通","171":"联通","175":"联通","176":"联通","185":"联通","186":"联通","166":"联通","134":"移动","135":"移动","136":"移动","137":"移动","138":"移动","139":"移动","147":"移动","150":"移动","151":"移动","152":"移动","157":"移动","158":"移动","159":"移动","172":"移动","178":"移动","182":"移动","183":"移动","184":"移动","187":"移动","188":"移动","198":"移动"}
</code></pre><p>获取该数组的长度：len(prelist) -&gt; 42</p> <p>随机生成下标获取三位数：<code>prelist.keys()[random.randint(0,41)]</code></p> <p>然后再随机填补后8位即可：</p><pre><code class="language-python">def genMobile():
    prelist = {"133":"电信","149":"电信","153":"电信","173":"电信","177":"电信","180":"电信","181":"电信","189":"电信","199":"电信","130":"联通","131":"联通","132":"联通","145":"联通","155":"联通","156":"联通","166":"联通","171":"联通","175":"联通","176":"联通","185":"联通","186":"联通","166":"联通","134":"移动","135":"移动","136":"移动","137":"移动","138":"移动","139":"移动","147":"移动","150":"移动","151":"移动","152":"移动","157":"移动","158":"移动","159":"移动","172":"移动","178":"移动","182":"移动","183":"移动","184":"移动","187":"移动","188":"移动","198":"移动"}
    three = list(prelist.keys())[random.randint(0,len(prelist)-1)]
    mobile = three + "".join(random.choice("0123456789") for i in range(8))
    op = prelist[three]
    return {mobile:op}
</code></pre><h3 id="genname">genName()</h3> <p>随机生成姓名：中文名字通常为2、3位汉字组成</p> <p>1.收集常用的姓氏随机取其一个：</p><pre><code class="language-python">def first_name():
    first_name_list = ['赵', '钱', '孙', '李', '周', '吴', '郑', '王', '冯', '陈', '褚', '卫', '蒋', '沈', '韩', '杨', '朱', '秦', '尤', '许',
                '何', '吕', '施', '张', '孔', '曹', '严', '华', '金', '魏', '陶', '姜', '戚', '谢', '邹', '喻', '柏', '水', '窦', '章',
                '云', '苏', '潘', '葛', '奚', '范', '彭', '郎', '鲁', '韦', '昌', '马', '苗', '凤', '花', '方', '俞', '任', '袁', '柳',
                '酆', '鲍', '史', '唐', '费', '廉', '岑', '薛', '雷', '贺', '倪', '汤', '滕', '殷', '罗', '毕', '郝', '邬', '安', '常',
                '乐', '于', '时', '傅', '皮', '卞', '齐', '康', '伍', '余', '元', '卜', '顾', '孟', '平', '黄', '和', '穆', '萧', '尹',
                '姚', '邵', '堪', '汪', '祁', '毛', '禹', '狄', '米', '贝', '明', '臧', '计', '伏', '成', '戴', '谈', '宋', '茅', '庞',
                '熊', '纪', '舒', '屈', '项', '祝', '董', '梁']
    n = random.randint(0, len(first_name_list) - 1)
    f_name = first_name_list[n]
    return f_name
</code></pre><p>2.这里一开始想搜罗常用的名字，但参考了其他师傅的代码发现随机生成中文字符更好一点：</p><pre><code class="language-python">def GBK2312():
    head = random.randint(0xb0, 0xf7)
    body = random.randint(0xa1, 0xf9)
    val = f'{head:x}{body:x}'
    st = bytes.fromhex(val).decode('gb2312')
    return st
</code></pre><p>3.随机生成名字的第二个字：(这里用一个list做一个空值，随机取生成的汉字或空值，<strong>用于成为随机生成2位名字或3位名字</strong>)</p><pre><code class="language-python">def second_name():
    second_name_list = [GBK2312(), '']
    n = random.randint(0, 1)
    s_name = second_name_list[n]
    return s_name
</code></pre><p>4.随机生成名字的最后一个字：(用于满足三个汉字的名字)</p><pre><code class="language-python">def last_name():
    return GBK2312()
</code></pre><p>5.拼接</p><pre><code class="language-python">def last_name():
    return GBK2312()
</code></pre><h3 id="genidcard">genIdCard()</h3> <p>随机生成身份证：公民身份号码是由17位数字码和1位校验码组成</p> <p>18位数字组合的方式是：</p> <table> <thead> <tr> <th>1 1 0 1 0 2</th> <th>Y Y Y Y M M D D</th> <th>8 8</th> <th>8</th> <th>X</th> </tr> </thead> <tbody> <tr> <td>区域码(6位)</td> <td>出生日期码(8位)</td> <td>顺序码(2位)</td> <td>性别码(1位)</td> <td>校验码(1位)</td> </tr> </tbody> </table> <ul> <li>6位区域码爬取http://www.360doc.com/content/12/1010/21/156610_240728293.shtml，存到了<code>districtcode.py</code></li> </ul> <blockquote> <p><strong>区域码</strong> 指的是公民常住户口所在县（市、镇、区）的<a href="https://zh.wikipedia.org/wiki/%E4%B8%AD%E5%8D%8E%E4%BA%BA%E6%B0%91%E5%85%B1%E5%92%8C%E5%9B%BD%E8%A1%8C%E6%94%BF%E5%8C%BA%E5%88%92%E4%BB%A3%E7%A0%81">行政区划代码</a>，如110102是北京市-西城区。但港澳台地区居民的身份号码只精确到省级。</p> </blockquote> <ul> <li>8位出生日期码，具体Python代码如下：</li> </ul><pre><code class="language-python">age = random.randint(16,60) #可调整生成的年龄范围（身份证），这边是16-60岁
y = date.today().year - age #生成的年份
m = date(y, 1, 1) #生成的月份，初始值为1月1日
d = timedelta(days=random.randint(0, 364)) #随机生成的天数
datestring = str(m + d) #加天数得到最终值
</code></pre><blockquote> <p><strong>出生日期码</strong> 表示公民出生的公历年（4位）、月（2位）、日（2位）。</p> </blockquote> <ul> <li>2位顺序码</li> </ul> <blockquote> <p><strong>顺序码</strong> 表示在同一区域码所标识的区域范围内，对同年、同月、同日出生的人编定的顺序号。</p> </blockquote> <ul> <li>1位性别码</li> </ul> <blockquote> <p><strong>性别码</strong> 奇数表示男性，偶数表示女性。</p> </blockquote> <ul> <li>最后一位是<strong>校验码</strong>，这里采用的是<strong>ISO 7064:1983,MOD 11-2</strong>校验码系统。校验码为一位数，但如果最后采用校验码系统计算的校验码是“10”，碍于身份证号码为18位的规定，则以“X”代替校验码“10”。</li> </ul> <p>最难的还是校验码的算法，参考师傅的解说：</p> <blockquote> <p>1.将前面的身份证号码17位数分别乘以不同的系数。从第一位到第十七位的系数分别为：7 9 10 5 8 4 2 1 6 3 7 9 10 5 8 4 2</p> </blockquote> <blockquote> <p>2.将这17位数字和系数相乘的结果相加。</p> </blockquote> <blockquote> <p>3.用加出来和除以11，得余数</p> </blockquote> <blockquote> <p>4.余数只可能是0 1 2 3 4 5 6 7 8 9 10这11个数字，其分别对应的最后一位身份证的号码为1 0 X 9 8 7 6 5 4 3 2。</p> </blockquote> <blockquote> <p>5.通过上面得知如果余数是2，就会在身份证的第18位数字上出现罗马数字的Ⅹ，如果余数是10，身份证的最后一位号码就是2。</p> </blockquote> <p>测试代码如下，取了几个真实的身份证号码发现可用：</p><pre><code class="language-python">def test(id_num):
	id_code_list = [7, 9, 10, 5, 8, 4, 2, 1, 6, 3, 7, 9, 10, 5, 8, 4, 2]
	check_code_list = [1, 0, 'X', 9, 8, 7, 6, 5, 4, 3, 2]
	a = 0
	print(len(id_num))
	for i in range(17):
		a = a + (int(id_num[i]) * id_code_list[int(i)])
	print(check_code_list[a % 11])
</code></pre><p>整合一下（Copy）就变成了如下完整的代码：</p><pre><code class="language-python">def genIdCard(age,gender):
    area_code = ('%s' % random.choice(list(area_dict.keys())))
    id_code_list = [7, 9, 10, 5, 8, 4, 2, 1, 6, 3, 7, 9, 10, 5, 8, 4, 2]
    check_code_list = [1, 0, 'X', 9, 8, 7, 6, 5, 4, 3, 2]
    if str(area_code) not in area_dict.keys():
        return None
    datestring = str(date(date.today().year - age, 1, 1) + timedelta(days=random.randint(0, 364))).replace("-", "")
    rd = random.randint(0, 999)
    if gender == 0:
        gender_num = rd if rd % 2 == 0 else rd + 1
    else:
        gender_num = rd if rd % 2 == 1 else rd - 1
    result = str(area_code) + datestring + str(gender_num).zfill(3)
    b = result + str(check_code_list[sum([a * b for a, b in zip(id_code_list, [int(a) for a in result])]) % 11])
    return b
</code></pre><h2 id="参考">参考</h2> <p>https://www.cnblogs.com/evening/archive/2012/04/19/2457440.html</p> <p>https://www.cnblogs.com/thunderLL/p/7682148.html</p> <p>https://blog.csdn.net/ak739105231/article/details/83932151</p> <p>https://github.com/jayknoxqu/id-number-util</p> <p>https://blog.csdn.net/tobacco5648/article/details/50613025</p> <p>https://github.com/xbeginagain/generator</p> </div> </article> <div class="page-navigation code"> <a class="next" href="http://localhost:4000/archives/2019-08-20/1" title="NEXT: TRICK: Linux Auditd审计工具">&lt;&lt;</a> <span> &middot; </span> <a class="home" href="http://localhost:4000/" title="Back to Index">INDEX</a> <span> &middot; </span> <a class="prev" href="http://localhost:4000/archives/2019-06-27/1" title="PREV: 基于BurpSuite快速探测越权-Authz插件">&gt;&gt;</a> </div> <div class="comments"> <div id="giscus-container" class="giscus"></div> <script> (function() { const getTheme = () => { try { const savedTheme = localStorage.getItem('theme'); if (savedTheme) { return savedTheme; } } catch (e) {} if (window.matchMedia && window.matchMedia('(prefers-color-scheme: dark)').matches) { return 'dark'; } const hour = new Date().getHours(); return (hour >= 6 && hour < 18) ? 'light' : 'dark'; }; const theme = getTheme(); const giscusTheme = theme === 'dark' ? 'dark_tritanopia' : 'light_protanopia'; const script = document.createElement('script'); script.src = "https://giscus.app/client.js"; script.setAttribute("data-repo", "gh0stkey/gh0stkey.github.io"); script.setAttribute("data-repo-id", "MDEwOlJlcG9zaXRvcnkzODc5NzEyMzU="); script.setAttribute("data-category", "Announcements"); script.setAttribute("data-category-id", "DIC_kwDOFx_4o84CyCUA"); script.setAttribute("data-mapping", "title"); script.setAttribute("data-strict", "0"); script.setAttribute("data-reactions-enabled", "0"); script.setAttribute("data-emit-metadata", "0"); script.setAttribute("data-input-position", "top"); script.setAttribute("data-lang", "zh-CN"); script.setAttribute("data-theme", giscusTheme); script.setAttribute("crossorigin", "anonymous"); script.async = true; document.getElementById('giscus-container').appendChild(script); })(); </script> </div> </div> <div class="footer"> <span class="block" >&lt;/&gt; Copyright &copy; Chen's Blog (GH0ST.CN) 2016-2021</span > </div> <script src="/fancybox/lib/jquery-1.10.2.min.js"></script> <script src="/assets/js/toc.js"></script> <script type="text/javascript" src="/fancybox/source/jquery.fancybox.pack.js?v=2.1.5" ></script> <script src="/assets/js/pangu/pangu.umd.js"></script> <script> document.addEventListener("DOMContentLoaded", () => { const proseElement = document.querySelector(".prose"); if (proseElement) { pangu.spacingNode(proseElement); } }); </script> <script> $(document).ready(function () { $("article img").each(function () { var strA = "<a style='text-decoration: none;' id='imgid' href='" + this.src + "'></a>"; $(this).wrapAll(strA); }); $(".block").html( "&lt;/&gt; Copyright &copy; Chen's Blog (GH0ST.CN) 2016-" + new Date().getFullYear(), ); }); $("#imgid").fancybox({ openEffect: "elastic", closeEffect: "elastic", }); </script> <script src="/assets/js/highlight/highlight.min.js"></script> <script> document.addEventListener('DOMContentLoaded', function() { document.querySelectorAll('pre code[class*="language-"]').forEach(block => { hljs.highlightElement(block); }); }); const toggleHighlightTheme = () => { const theme = document.documentElement.getAttribute('data-theme'); const lightCss = document.getElementById('highlight-light'); const darkCss = document.getElementById('highlight-dark'); if (theme === 'dark') { lightCss.disabled = true; darkCss.disabled = false; } else { lightCss.disabled = false; darkCss.disabled = true; } }; document.addEventListener('DOMContentLoaded', toggleHighlightTheme); const observer = new MutationObserver(toggleHighlightTheme); observer.observe(document.documentElement, { attributes: true, attributeFilter: ['data-theme'] }); </script> </body> </html>
